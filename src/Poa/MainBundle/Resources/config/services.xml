<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="genders" type="collection">
            <parameter key="m">Male</parameter>
            <parameter key="f">Female</parameter>
        </parameter>
    </parameters>

    <services>
        <service id="poa_main.menu_builder" class="Poa\MainBundle\Menu\MenuBuilder">
            <argument type="service" id="knp_menu.factory" />
            <argument type="service" id="doctrine.orm.entity_manager" />
            <argument type="service" id="security.context" />
        </service>

        <service id="poa_main.content_builder" class="Poa\MainBundle\Content\ContentBuilder">
            <argument type="service" id="doctrine.orm.entity_manager" />
        </service>

        <service id="poa_main.menu.login" class="Knp\Menu\MenuItem" factory-service="poa_main.menu_builder" factory-method="createLoginMenu" scope="request">
            <tag name="knp_menu.menu" alias="login"/>
            <argument type="service" id="request" />
        </service>

        <service id="poa_main.menu.welcome" class="Knp\Menu\MenuItem" factory-service="poa_main.menu_builder" factory-method="createWelcomeMenu" scope="request">
            <tag name="knp_menu.menu" alias="welcome"/>
            <argument type="service" id="request" />
        </service>

        <service id="poa_main.menu.residents" class="Knp\Menu\MenuItem" factory-service="poa_main.menu_builder" factory-method="createResidentsMenu" scope="request">
            <tag name="knp_menu.menu" alias="residents"/>
            <argument type="service" id="request" />
        </service>

        <!--<service id="poa_main.content.about" factory-service="poa_main.content_builder" factory-method="createContent" scope="request">-->
            <!--<argument type="service" id="request" />-->
        <!--</service>-->

        <service id="twig.extension.poa.main" class="Poa\MainBundle\Twig\Extension\MainExtension" public="false">
            <tag name="twig.extension" />
            <argument type="service" id="twig.loader" />
        </service>

        <service id="poa.main.listener" class="Poa\MainBundle\EventListener\ControllerListener">
            <tag name="kernel.event_listener" event="kernel.controller" method="onKernelController" />
            <argument type="service" id="twig.extension.poa.main" />
        </service>

        <service id="poa.form.type.gender" class="Poa\MainBundle\Form\Type\GenderType">
            <tag name="form.type" alias="gender" />
            <argument>%genders%</argument>
        </service>

        <!--<service id="poa.main.admin.menu" class="Poa\MainBundle\Admin\MenuAdmin">-->
            <!--<tag name="sonata.admin" manager_type="orm" group="system" label="menu"/>-->
            <!--<argument />-->
            <!--<argument>Poa\MainBundle\Entity\Menu</argument>-->
            <!--<argument>SonataAdminBundle:CRUD</argument>-->
        <!--</service>-->

        <!--<service id="poa.main.admin.content" class="Poa\MainBundle\Admin\ContentAdmin">-->
            <!--<tag name="sonata.admin" manager_type="orm" group="system" label="content"/>-->
            <!--<argument />-->
            <!--<argument>Poa\MainBundle\Entity\Content</argument>-->
            <!--<argument>SonataAdminBundle:CRUD</argument>-->
        <!--</service>-->

        <!--<service id="poa_main.decoda.filter.bbcode" class="Poa\MainBundle\BbCode\Filter\BbCodeFilter">-->
            <!--<tag name="fm_bbcode.decoda.filter" alias="bbcode" />-->
        <!--</service>-->
    </services>
</container>
